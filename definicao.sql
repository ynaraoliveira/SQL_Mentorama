-- Criação da base de dados
CREATE DATABASE IF NOT EXISTS ecommerce;

USE ecommerce;

-- Criação das tabelas
CREATE TABLE IF NOT EXISTS ecommerce.autores (
  id_autor INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  nome VARCHAR(255),
  sobrenome VARCHAR(255)
)
COMMENT "Tabela com os dados dos autores dos livros cadastrados";

CREATE TABLE IF NOT EXISTS ecommerce.livros (
  id_livro INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  id_autor INT NOT NULL,
  titulo VARCHAR(255),
  genero VARCHAR(255),
  FOREIGN KEY (id_autor) REFERENCES autores(id_autor)
)
COMMENT "Tabela com os dados dos livros vendidos no ecommerce";

CREATE TABLE IF NOT EXISTS ecommerce.estoque (
  id_estoque INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  id_livro INT NOT NULL,
  formato ENUM('F', 'D'), -- F: físico D: digital
  FOREIGN KEY (id_livro) REFERENCES livros(id_livro)
)
COMMENT "Tabela com os dados de todo o estoque de livros disponíveis";

CREATE TABLE IF NOT EXISTS ecommerce.enderecos (
  id_endereco INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  logradouro VARCHAR(255),
  cep VARCHAR(9),
  cidade VARCHAR(255),
  estado VARCHAR(255)
)
COMMENT "Tabela com os endereços dos clientes cadastrados";

CREATE TABLE IF NOT EXISTS ecommerce.clientes (
  id_cliente INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  id_endereco INT NOT NULL,
  nome VARCHAR(255),
  sobrenome VARCHAR(255),
  email VARCHAR(255) UNIQUE,
  ultima_atualizacao DATE,
  ativo BOOLEAN,
  FOREIGN KEY (id_endereco) REFERENCES enderecos(id_endereco)
)
COMMENT "Tabela com os dados dos clientes que já utilizaram o ecommerce";

CREATE TABLE IF NOT EXISTS ecommerce.pedidos (
  id_pedido INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  id_cliente INT NOT NULL,
  id_estoque INT NOT NULL,
  status VARCHAR(255) NOT NULL, 
  FOREIGN KEY (id_cliente) REFERENCES clientes(id_cliente),
  FOREIGN KEY (id_livro) REFERENCES livros(id_livro),
  FOREIGN KEY (id_estoque) REFERENCES estoque(id_estoque)
)
COMMENT "Tabela com os dados dos pedidos feitos pelos clientes";

CREATE TABLE IF NOT EXISTS ecommerce.vendas (
  id_pedido INT NOT NULL,
  valor DECIMAL(10,2) CHECK(valor>0),
  data_pedido TIMESTAMP,
  FOREIGN KEY (id_pedido) REFERENCES pedidos(id_pedido)
)
COMMENT "Tabela com os dados dos pedidos aprovados";

-- Inserção dos dados nas tabelas
INSERT INTO ecommerce.autores (nome, sobrenome) 
  VALUES ('Johnnie', 'Pollock'),
         ('Charles', 'Wedel'),
         ('Kevin', 'Parkhill'),
         ('Richard', 'K. Johnson'),
         ('Mary', 'G. Hawks'),
         ('Andrea', 'Craven'), 
         ('William', 'Serrano'),
         ('Xiuxiu', 'Wan'),
         ('Liang', 'Tu'),
         ('Marcus', 'M. Jacobsen'),
         ('Pauline', 'Guilmette'),
         ('Alexis', 'Charlebois'),
         ('Giovanna', 'Azevedo Alves'),
         ('Luiza', 'Cunha Carvalho'),
         ('Mateus', 'Martins Cardoso'),
         ('Diogo', 'Souza Almeida'),
         ('Tânia', 'Castro Goncalves'),
         ('Evelyn', 'Carvalho'),
         ('Guilherme', 'Barbosa Cardoso'),
         ('Julieta', 'Rocha Alves');

INSERT INTO ecommerce.livros (id_autor, titulo, genero)
  VALUES (1, 'O Mistério do Castelo Assombrado', 'mistério'),
         (2, 'A Queda dos Reinos', 'fantasia'),
         (3, 'O Jardim Secreto', 'infantojuvenil'),
         (4, 'Amor e Traição', 'romance'),
         (5, 'A Conspiração dos Sábios', 'suspense'),
         (6, 'A Era dos Dragões', 'fantasia'),
         (7, 'Os Segredos do Passado', 'mistério'),
         (8, 'O Poder da Imaginação', 'infantojuvenil'),
         (9, 'O Destino de Dois', 'romance'),
         (10, 'A Trama Perfeita', 'suspense'),
         (11, 'O Enigma das Estrelas', 'ficção científica'),
         (12, 'O Segredo da Montanha', 'aventura'),
         (13, 'O Despertar das Sombras', 'fantasia'),
         (14, 'O Silêncio dos Inocentes', 'suspense'),
         (15, 'A Promessa de Uma Vida', 'romance'),
         (16, 'A Vingança do Passado', 'mistério'),
         (17, 'O Legado dos Ancestrais', 'fantasia'),
         (18, 'A Verdade Escondida', 'suspense'),
         (19, 'O Universo Paralelo', 'ficção científica'),
         (20, 'O Tesouro Perdido', 'aventura'),
         (14, 'O Último Suspiro', 'suspense'),
         (2, 'O Herdeiro do Trono', 'fantasia'),
         (9, 'A Promessa Quebrada', 'romance'),
         (12, 'O Segredo da Ilha Negra', 'aventura'),
         (7, 'O Labirinto dos Enigmas', 'mistério');
		
INSERT INTO ecommerce.estoque (id_livro, formato)
  VALUES (25, 'F'),
         (25, 'D'),
         (24, 'F'),
         (24, 'F'),
         (24, 'D'),
         (24, 'F'),
         (24, 'F'),
         (23, 'D'),
         (23, 'F'),
         (22, 'F'),
         (22, 'D'),
         (22, 'F'),
         (22, 'F'),
         (22, 'D'),
         (21, 'F'),
         (20, 'F'),
         (20, 'D'),
         (20, 'F'),
         (20, 'F'),
         (20, 'D'),
         (20, 'F'),
         (19, 'F'),
         (19, 'D'),
         (19, 'F'),
         (18, 'F'),
         (18, 'D'),
         (18, 'F'),
         (17, 'F'),
         (17, 'D'),
         (16, 'F'),
         (16, 'F'),
         (16, 'D'),
         (16, 'F'),
         (15, 'F'),
         (15, 'D'),
         (15, 'F'),
         (15, 'F'),
         (14, 'D'),
         (14, 'F'),
         (14, 'F'),
         (13, 'F'),
         (13, 'D'),
         (12, 'F'),
         (12, 'F'),
         (12, 'D'),
         (11, 'F'),
         (10, 'F'),
         (10, 'D'),
         (9, 'F'),
         (9, 'F'),
         (9, 'D'),
         (8, 'F'),
         (8, 'F'),
         (7, 'F'),
         (7, 'F'),
         (7, 'D'),
         (6, 'F'),
         (5, 'F'),
         (5, 'F'),
         (4, 'F'),
         (4, 'D'),
         (4, 'F'),
         (3, 'F'),
         (3, 'F'),
         (2, 'F'),
         (2, 'D'),
         (1, 'F'),
         (1, 'F');

INSERT INTO ecommerce.enderecos (logradouro, cep, cidade, estado)
  VALUES ('Rua das Flores', '12345-678', 'São Paulo', 'SP'),
         ('Avenida Brasil', '23456-789', 'Rio de Janeiro', 'RJ'),
         ('Travessa das Oliveiras', '34567-890', 'Belo Horizonte', 'MG'),
         ('Rua dos Ipês', '45678-901', 'Salvador', 'BA'),
         ('Avenida Central', '56789-012', 'Fortaleza', 'CE'),
         ('Praça da Liberdade', '67890-123', 'Curitiba', 'PR'),
         ('Rua das Palmeiras', '78901-234', 'Recife', 'PE'),
         ('Avenida dos Girassóis', '89012-345', 'Brasília', 'DF'),
         ('Travessa das Acácias', '90123-456', 'Porto Alegre', 'RS'),
         ('Rua das Laranjeiras', '01234-567', 'Manaus', 'AM'),
         ('Avenida Central', '12345-678', 'Belém', 'PA'),
         ('Rua dos Cravos', '23456-789', 'Goiânia', 'GO'),
         ('Travessa das Rosas', '34567-890', 'São Paulo', 'SP'),
         ('Avenida dos Jacarandás', '45678-901', 'Natal', 'RN'),
         ('Rua das Orquídeas', '56789-012', 'Teresina', 'PI'),
         ('Avenida Central', '67890-123', 'João Pessoa', 'PB'),
         ('Praça da Independência', '78901-234', 'Cuiabá', 'MT'),
         ('Rua das Violetas', '89012-345', 'Campo Grande', 'MS'),
         ('Avenida dos Jasmins', '90123-456', 'Vitória', 'ES'),
         ('Travessa das Hortênsias', '01234-567', 'Florianópolis', 'SC'),
         ('Rua das Margaridas', '12345-678', 'Macapá', 'AP'),
         ('Avenida Central', '23456-789', 'Aracaju', 'SE'),
         ('Rua dos Girassóis', '34567-890', 'Palmas', 'TO'),
         ('Rua das Violetas', '45678-901', 'Florianópolis', 'SC'),
         ('Avenida Central', '56789-012', 'Goiânia', 'GO'),
         ('Travessa dos Cravos', '67890-123', 'Belo Horizonte', 'MG'),
         ('Rua das Margaridas', '78901-234', 'Porto Alegre', 'RS'),
         ('Avenida dos Ipês', '89012-345', 'São Paulo', 'SP');
         
INSERT INTO ecommerce.clientes (id_endereco, nome, sobrenome, email, ultima_atualizacao, ativo)
  VALUES (1, 'João', 'Silva', 'joao.silva@gmail.com', '2023-01-01', TRUE),
         (2, 'Maria', 'Santos', 'maria.santos@hotmail.com', '2023-01-02', TRUE),
         (3, 'Pedro', 'Ferreira', 'pedro.ferreira@gmail.com', '2023-01-03', TRUE),
         (4, 'Ana', 'Oliveira', 'ana.oliveira@yahoo.com', '2023-01-04', TRUE),
         (5, 'José', 'Souza', 'jose.souza@gmail.com', '2023-01-05', TRUE),
         (6, 'Mariana', 'Almeida', 'mariana.almeida@hotmail.com', '2023-01-06', TRUE),
         (7, 'Carlos', 'Rodrigues', 'carlos.rodrigues@yahoo.com', '2023-01-07', TRUE),
         (8, 'Camila', 'Costa', 'camila.costa@gmail.com', '2023-01-08', TRUE),
         (9, 'Fernando', 'Pereira', 'fernando.pereira@hotmail.com', '2023-01-09', TRUE),
         (10, 'Isabela', 'Carvalho', 'isabela.carvalho@yahoo.com', '2023-01-10', TRUE),
         (11, 'Rafael', 'Gomes', 'rafael.gomes@gmail.com', '2023-01-11', TRUE),
         (12, 'Laura', 'Martins', 'laura.martins@hotmail.com', '2023-01-12', TRUE),
         (13, 'Bruno', 'Ribeiro', 'bruno.ribeiro@yahoo.com', '2023-01-13', TRUE),
         (14, 'Juliana', 'Pinto', 'juliana.pinto@gmail.com', '2023-01-14', TRUE),
         (15, 'Rodrigo', 'Cardoso', 'rodrigo.cardoso@hotmail.com', '2023-01-15', TRUE),
         (16, 'Amanda', 'Cunha', 'amanda.cunha@yahoo.com', '2023-01-16', TRUE),
         (17, 'Lucas', 'Lima', 'lucas.lima@gmail.com', '2023-01-17', TRUE),
         (18, 'Sofia', 'Sousa', 'sofia.sousa@hotmail.com', '2023-01-18', TRUE),
         (19, 'Diego', 'Mendes', 'diego.mendes@yahoo.com', '2023-01-19', TRUE),
         (20, 'Gabriela', 'Barbosa', 'gabriela.barbosa@gmail.com', '2023-01-20', TRUE),
         (21, 'Matheus', 'Nunes', 'matheus.nunes@hotmail.com', '2023-01-21', TRUE),
         (22, 'Lara', 'Garcia', 'lara.garcia@yahoo.com', '2023-01-22', TRUE),
         (23, 'Henrique', 'Oliveira', 'henrique.oliveira@gmail.com', '2023-01-23', TRUE),
         (24, 'Beatriz', 'Rocha', 'beatriz.rocha@hotmail.com', '2023-01-24', TRUE),
         (25, 'Guilherme', 'Santos', 'guilherme.santos@yahoo.com', '2023-01-25', TRUE),
         (26, 'Vitória', 'Fernandes', 'vitoria.fernandes@gmail.com', '2023-01-26', TRUE),
         (27, 'Felipe', 'Carvalho', 'felipe.carvalho@hotmail.com', '2023-01-27', TRUE),
         (28, 'Carolina', 'Melo', 'carolina.melo@yahoo.com', '2023-01-28', TRUE),
         (1, 'Eduardo', 'Lopes', 'eduardo.lopes@gmail.com', '2023-01-29', TRUE),
         (2, 'Larissa', 'Alves', 'larissa.alves@hotmail.com', '2023-01-30', TRUE),
         (3, 'Leonardo', 'Pereira', 'leonardo.pereira@yahoo.com', '2023-01-31', TRUE),
         (4, 'Natália', 'Ramos', 'natalia.ramos@gmail.com', '2023-02-01', TRUE),
         (5, 'André', 'Santana', 'andre.santana@hotmail.com', '2023-02-02', TRUE),
         (6, 'Mariana', 'Silva', 'mariana.silva@yahoo.com', '2023-02-03', TRUE),
         (7, 'Ricardo', 'Gonçalves', 'ricardo.goncalves@gmail.com', '2023-02-04', TRUE),
         (8, 'Clara', 'Pinto', 'clara.pinto@hotmail.com', '2023-02-05', FALSE),
         (9, 'Gustavo', 'Ferreira', 'gustavo.ferreira@yahoo.com', '2023-02-06', FALSE),
         (10, 'Sophia', 'Nogueira', 'sophia.nogueira@gmail.com', '2023-02-07', FALSE),
         (11, 'Marcelo', 'Cavalcanti', 'marcelo.cavalcanti@hotmail.com', '2023-02-08', FALSE),
         (12, 'Antonella', 'Santos', 'antonella.santos@yahoo.com', '2023-02-09', FALSE),
         (13, 'Thiago', 'Araújo', 'thiago.araujo@gmail.com', '2023-02-10', FALSE),
         (14, 'Valentina', 'Ribeiro', 'valentina.ribeiro@hotmail.com', '2023-02-11', FALSE),
         (15, 'Hugo', 'Melo', 'hugo.melo@yahoo.com', '2023-02-12', FALSE),
         (16, 'Helena', 'Lima', 'helena.lima@gmail.com', '2023-02-13', FALSE),
         (17, 'Arthur', 'Almeida', 'arthur.almeida@hotmail.com', '2023-02-14', FALSE);
         
INSERT INTO ecommerce.pedidos (id_cliente, id_estoque, status)
  VALUES (1, 1, "aprovado"),
         (2, 2, "aprovado"),
         (3, 68, "aprovado"),
         (4, 3, "aprovado"),
         (5, 67, "aprovado"),
         (6, 4, "aprovado"),
         (7, 66, "aprovado"),
         (8, 5, "aprovado"),
         (9, 65, "aprovado"),
         (10, 6, "aprovado"),
         (11, 64, "aprovado"),
         (12, 7, "aprovado"),
         (13, 63, "aprovado"),
         (14, 8, "aprovado"),
         (15, 62, "aprovado"),
         (16, 9, "aprovado"),
         (17, 61, "aprovado"),
         (18, 10, "aprovado"),
         (19, 60, "aprovado"),
         (20, 11, "aprovado"),
         (21, 59, "aprovado"),
         (22, 12, "aprovado"),
         (23, 58, "aprovado"),
         (4, 13, "aprovado"),
         (5, 57, "aprovado"),
         (7, 14, "aprovado"),
         (8, 56, "aprovado"),
         (9, 15, "aprovado"),
         (10, 55, "aprovado"),
         (1, 16, "aprovado"),
         (1, 54, "aprovado"),
         (31, 17, "aprovado"),
         (24, 53, "aprovado"),
         (21, 18, "aprovado"),
         (14, 52, "aprovado"),
         (2, 19, "aprovado"),
         (3, 51, "aprovado"),
         (35, 20, "aprovado"),
         (27, 50, "aprovado"),
         (28, 21, "aprovado"),
         (13, 49, "aprovado"),
         (36, 22, "pendente"),
         (37, 48, "pendente"),
         (38, 23, "pendente"),
         (39, 47, "pendente"),
         (40, 24, "reprovado"),
         (41, 46, "reprovado"),
         (42, 25, "reprovado"),
         (43, 45, "reprovado"),
         (44, 26, "reprovado");
         
INSERT INTO ecommerce.vendas (id_pedido, valor, data_pedido)
  VALUES (1, 34.20, '2023-06-05 15:25:30'),
         (2, 46.90, '2023-06-04 13:42:18'),
         (3, 56.00, '2023-06-03 12:19:56'),
         (4, 21.57, '2023-06-02 09:57:44'),
         (5, 74.04, '2023-06-01 08:34:32'),
         (6, 68.10, '2023-05-31 07:11:20'),
         (7, 42.78, '2023-05-30 05:48:08'),
         (8, 51.50, '2023-05-29 04:24:56'),
         (9, 27.39, '2023-05-28 03:01:44'),
         (10, 102.45, '2023-05-27 01:38:32'),
         (11, 29.80, '2023-05-26 00:15:20'),
         (12, 31.90, '2023-05-25 22:52:08'),
         (13, 37.20, '2023-05-24 21:28:56'),
         (14, 45.90, '2023-05-23 20:05:44'),
         (15, 31.31, '2023-05-22 18:42:32'),
         (16, 19.38, '2023-05-21 17:19:20'),
         (17, 50.00, '2023-05-20 15:56:08'),
         (18, 28.90, '2023-05-19 14:32:56'),
         (19, 34.75, '2023-05-18 13:09:44'),
         (20, 23.45, '2023-05-17 11:46:32'),
         (21, 64.90, '2023-05-16 10:23:20'),
         (22, 43.86, '2023-05-15 09:00:08'),
         (23, 42.12, '2023-05-14 07:36:56'),
         (24, 39.32, '2023-05-13 06:13:44'),
         (25, 79.25, '2023-05-12 04:50:32'),
         (26, 61.50, '2023-05-11 03:27:20'),
         (27, 38.70, '2023-05-10 02:04:08'),
         (28, 71.84, '2023-05-09 00:40:56'),
         (29, 53.99, '2023-05-08 23:17:44'),
         (30, 41.99, '2023-05-07 21:54:32'),
         (31, 29.90, '2023-05-06 20:31:20'),
         (32, 41.90, '2023-05-05 19:08:08'),
         (33, 56.99, '2023-05-04 17:44:56'),
         (34, 56.98, '2023-05-03 16:21:44'),
         (35, 49.90, '2023-05-02 14:58:32'),
         (36, 71.90, '2023-05-01 13:35:20'),
         (37, 54.50, '2023-04-30 12:12:08'),
         (38, 71.90, '2023-04-29 10:48:56'),
         (39, 82.00, '2023-04-28 09:25:44'),
         (40, 77.90, '2023-04-27 08:02:32'),
         (41, 35.89, '2023-04-26 06:39:20');